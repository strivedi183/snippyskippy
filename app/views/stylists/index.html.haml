:css
  body {
    margin:0px;
    padding:0px;
    font:normal 15px/20px Arial,sans-serif;
    background:#fff;
    }

  #map  {
    position:absolute;
    top:0px;
    bottom:0px;
    left:0px;
    width:100%;
    }

#map
%script
  var geojson = [];
  - @stylists.each do |stylist|
    = "geojson.push({ 'geometry': { 'type': 'Point', 'coordinates': [#{stylist.salon.latitude}, #{stylist.salon.longitude}] },
      'properties': { 'title': '#{stylist.user.name}'' } });"

:javascript

  var tiles = mapbox.layer().tilejson({
    tiles: [ "http://a.tiles.mapbox.com/v3/examples.map-6m5zwq0h/{z}/{x}/{y}.png" ]
  });
  var spots = mapbox.markers.layer()
    // Load up markers from geojson data.
    .features(geojson);

  var map = mapbox
    // Creates the map with tile and spots layers.
    .map('map', [tiles, spots])
    // Sets the initial map view to 0.1296E, 51.5011N @ Z14.
    .centerzoom({ lon:-0.1296, lat:51.5011 }, 14);

  // Enable interaction events on spots layer.
  mapbox.markers.interaction(spots);


  / var geojson = [
  /   { "geometry": { "type": "Point", "coordinates": [-0.15591514, 51.51830379] },
  /     "properties": { "title": "Baker St." } },
  /   { "geometry": { "type": "Point", "coordinates": [-0.07571203, 51.51424049] },
  /     "properties": { "title": "Aldgate Station" } },
  /   { "geometry": { "type": "Point", "coordinates": [-0.08533793, 51.50438536] },
  /     "properties": { "title": "London Bridge Station" } },
  /   { "geometry": { "type": "Point", "coordinates": [0.05991101, 51.48752939] },
  /     "properties": { "title": "Woolwich Arsenal" } },
  /   { "geometry": { "type": "Point", "coordinates": [-0.18335806, 51.49439521] },
  /     "properties": { "title": "Gloucester Station" } },
  /   { "geometry": { "type": "Point", "coordinates": [-0.19684993, 51.5033856] },
  /     "properties": { "title": "Caulfield Gardens" } },
  /   { "geometry": { "type": "Point", "coordinates": [-0.10669358, 51.51433123] },
  /     "properties": { "title": "The Daily Telegraph" } },
  /   { "geometry": { "type": "Point", "coordinates": [-0.12416858, 51.50779757] },
  /     "properties": { "title": "Charing Cross Station" } },
  / ];

/ .row
/   #map_canvas.index
/     %script
/       var salons = [];
/       display_map(40.7316, -73.9901, 12);
/       -@salons.each do |salon|
/         = "add_salon_marker(#{salon.latitude}, #{salon.longitude}, '#{salon.name}');"
/ .row
/   #carousel
/     - @stylists.each do |stylist|
/       .carousel-item
/         %div
/           = link_to(image_tag(stylist.user.image, :class => 'index_pics'), stylist_path(stylist))

/ :javascript
/   $.backstretch("https://dl.dropbox.com/u/5433755/snippy/the-klinik-hair-salon-interior-design-09.jpg");
