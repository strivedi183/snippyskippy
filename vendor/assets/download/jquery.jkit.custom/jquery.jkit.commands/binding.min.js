
// jQuery Plugin: jKit
// A very easy to use, cross platform jQuery UI toolkit that's still small in size, has the features you need and doesn't get in your way.
// Version 1.2.1 - 31. Mar. 2013
// http://jquery-jkit.com/
//
// by Fredi Bach
// http://fredibach.ch/jquery-plugins/

plugin.commands.binding=function(){var command={};plugin.addCommandDefaults("binding",{selector:"",source:"val",variable:"",mode:"text",interval:100,math:"",condition:"","if":"","else":"",speed:0,easing:"linear",search:"",trigger:"no",accuracy:"",min:"",max:""}),command.execute=function(a,b){window.setTimeout(function(){binding(a,b)},0)};var binding=function(el,options){if(windowhasfocus||!windowhasfocus&&plugin.settings.ignoreFocus){if(void 0==options.value){if(""!=options.selector){var selsplit=options.selector.split("|"),sourcesplit=options.source.split("."),values=[];if($.each(selsplit,function(a,b){"this"==b?b=el:"parent"==b&&(b=$(el).parent().get(0)),$(b).each(function(){switch(sourcesplit[0]){case"event":$(this).on(sourcesplit[1],function(){options.value=1,binding(el,options),void 0!=options.macro&&plugin.applyMacro($(el),options.macro)});break;case"html":var a=$(this).html();break;case"text":var a=$(this).text();break;case"attr":var a=$(this).attr(sourcesplit[1]);break;case"css":if("height"==sourcesplit[1])var a=$(this).height();else if("innerHeight"==sourcesplit[1])var a=$(this).innerHeight();else if("outerHeight"==sourcesplit[1])var a=$(this).outerHeight();else if("width"==sourcesplit[1])var a=$(this).width();else if("innerWidth"==sourcesplit[1])var a=$(this).innerWidth();else if("outerWidth"==sourcesplit[1])var a=$(this).outerWidth();else if("scrollTop"==sourcesplit[1])var a=$(this).scrollTop();else if("scrollLeft"==sourcesplit[1])var a=$(this).scrollLeft();else var a=$(this).css(sourcesplit[1]);break;case"scroll":switch(sourcesplit[1]){case"top":var a=$(window).scrollTop();break;case"left":var a=$(window).scrollLeft()}break;case"clearance":var b=el.offset().top-$(window).scrollTop(),c=$(window).scrollTop()+$(window).height()-(el.offset().top+el.height()),d=$(window).width()+$(window).scrollLeft()-(el.offset().left+el.width()),e=el.offset().left-$(window).scrollLeft();switch(sourcesplit[1]){case"bottom":var a=c;break;case"top":var a=b;break;case"right":var a=d;break;case"left":var a=e;break;default:var a=Math.min.apply(Math,[c,b,d,e])}break;case"has":switch(sourcesplit[1]){case"class":var a=$(this).hasClass(options.search);break;case"text":var a=$.fn.jKit_stringOccurrences($(this).text().toLowerCase(),options.search.toLowerCase());break;case"attribute":var a=void 0!==$(this).attr(options.search);break;case"val":var a=$.fn.jKit_stringOccurrences($(this).val().toLowerCase(),options.search.toLowerCase());break;case"element":var a=$(this).find(options.search).length;break;case"children":var a=$(this).children(options.search).length;break;case"hash":var a=window.location.hash==options.search}break;case"location":var a=window.location[sourcesplit[1]];break;case"val":default:var a=$(this).val()}values.push(a)})}),void 0!=sourcesplit[2]){var value="";switch(sourcesplit[2]){case"max":value=Math.max.apply(Math,values);break;case"min":value=Math.min.apply(Math,values);break;case"sum":value=values.reduce(function(a,b){return a+b});break;case"avg":value=values.reduce(function(a,b){return a+b})/values.length}}else var value=values[0]}else if(""!=options.variable)var value=window[options.variable]}else value=options.value;isNaN(value)||parseInt(value)!=value||(""!=options.accuracy&&(value=Math.round(value/options.accuracy)*options.accuracy),""!=options.min&&options.min>value&&(value=options.min),""!=options.max&&value>options.max&&(value=options.max));var doit,rev=!1;if(""!=options.condition?(doit=!1,eval("if ("+options.condition.replace(/[^a-zA-Z 0-9#\<\>\=\.\!\']+/g,"")+") doit = true;")):value===!1?(doit=!1,rev=!0):doit=!0,(void 0==commandkeys[options.commandkey].condition||commandkeys[options.commandkey].condition!=doit)&&(doit?plugin.triggerEvent("true",$(el),options):plugin.triggerEvent("false",$(el),options),commandkeys[options.commandkey].condition=doit),rev&&(doit=!0),doit||""==options["else"]?doit&&""!=options["if"]&&(doit=!0,value=options["if"]):(doit=!0,value=options["else"]),doit){""!=options.math&&eval("value = "+options.math.replace(/[^a-zA-Z 0-9\+\-\*\/\.]+/g,"")+";"),"yes"==options.trigger&&(void 0==commandkeys[options.commandkey].triggervalue||commandkeys[options.commandkey].triggervalue!=value)&&(void 0!==commandkeys[options.commandkey].triggervalue&&plugin.triggerEvent("notvalue"+commandkeys[options.commandkey].triggervalue,$(el),options),plugin.triggerEvent("value"+value,$(el),options),commandkeys[options.commandkey].triggervalue=value);var modesplit=options.mode.split(".");switch(modesplit[0]){case"text":el.text(value);break;case"html":el.html(value);break;case"val":el.val(value);break;case"attr":el.attr(modesplit[1],value);break;case"css":if("display"==modesplit[1]&&(""!=$.trim(value)&&0!=$.trim(value)&&value?void 0!==modesplit[2]&&(value=modesplit[2]):value="none"),options.speed>0){var style={};style[modesplit[1]]=value,el.animate(style,options.speed,options.easing)}else el.css(modesplit[1],value);break;case"none":break;default:if(void 0!=modesplit[0]){var fn=window[modesplit[0]];"function"==typeof fn&&fn(value,el)}}}}-1!=options.interval&&window.setTimeout(function(){binding(el,options)},options.interval)};return command}();
